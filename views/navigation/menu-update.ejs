<%- include("../partial/header.ejs") %>

    <%- include('../partial/breadcrumbs.ejs') %>


        <!-- Client Details -->
        <div class="clientdetail commpadisecar">
            <div class="container">


                <% if (navigation) { %>
                    <form action="/navigation/menu/UpdateMenu/<%= navigation.U_URl_ID %>" method="post">
                        <div class="row">
                            <div class="col-md-3 ps-0">
                                <div class="navigation_menu">
                                    <h4>
                                        <span>
                                            <svg class="svg-inline--fa fa-folder-open fa-w-18" aria-hidden="true"
                                                data-prefix="fa" data-icon="folder-open"
                                                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
                                                <path fill="currentColor"
                                                    d="M572.694 292.093 500.27 416.248A64 64 0 0 1 444.989 448H45.025c-18.523 0-30.064-20.093-20.731-36.093l72.424-124.155A64 64 0 0 1 152 256h399.964c18.523 0 30.064 20.093 20.73 36.093M152 224h328v-48c0-26.51-21.49-48-48-48H272l-64-64H48C21.49 64 0 85.49 0 112v278.046l69.077-118.418C86.214 242.25 117.989 224 152 224" />
                                            </svg>
                                        </span> Available Menu Fields
                                    </h4>
                                    <ul id="menuItemsList">
                                        <% SavePageData.forEach(pages=> { %>
                                            <li>
                                                <b>
                                                    <span>
                                                        <input type="checkbox" value="<%= pages.Title %>"
                                                            class="form-check-input" data-title="<%= pages.Title %>">
                                                    </span>
                                                    <%= pages.Title %>
                                                </b>
                                            </li>
                                            <% }); %>
                                    </ul>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="draftbox norformsetup">
                                    <div class="form-group">
                                        <label for="Menu_name">Menu Name: <sup>*</sup></label>
                                        <input type="text" class="form-control" id="Menu_name" name="Menu_name"
                                            value="<%= navigation.Menu_Name  %>" required aria-required="true">
                                    </div>

                                    <div class="menulist">
                                        <h4>
                                            <span>
                                                <svg class="svg-inline--fa fa-star fa-w-18" aria-hidden="true"
                                                    data-prefix="fa" data-icon="star" xmlns="http://www.w3.org/2000/svg"
                                                    viewBox="0 0 576 512">
                                                    <path fill="currentColor"
                                                        d="M259.3 17.8 194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0" />
                                                </svg>
                                            </span> Selected Menu Fields
                                        </h4>

                                        <div class="dd" id="nestable">
                                            <% const menuItems=JSON.parse(navigation.Menu_Json); %>

                                                <ol class="dd-list" id="selectedMenuItems">
                                                    <% menuItems.forEach(item=> { %>
                                                        <li class="dd-item" data-id="<%= item.id %>">
                                                            <div class="dd-handle">
                                                                <span>
                                                                    <svg viewBox="0 0 20 20"
                                                                        class="Online-Store-UI-IconWrapper__Icon_1aflm">
                                                                        <path
                                                                            d="M7.5 4.5a1 1 0 0 0-1 1V6a1 1 0 0 0 1 1H8a1 1 0 0 0 1-1v-.5a1 1 0 0 0-1-1zm0 4.25a1 1 0 0 0-1 1v.5a1 1 0 0 0 1 1H8a1 1 0 0 0 1-1v-.5a1 1 0 0 0-1-1zM6.5 14a1 1 0 0 1 1-1H8a1 1 0 0 1 1 1v.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1zM12 4.5a1 1 0 0 0-1 1V6a1 1 0 0 0 1 1h.5a1 1 0 0 0 1-1v-.5a1 1 0 0 0-1-1zm-1 5.25a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v.5a1 1 0 0 1-1 1H12a1 1 0 0 1-1-1zM12 13a1 1 0 0 0-1 1v.5a1 1 0 0 0 1 1h.5a1 1 0 0 0 1-1V14a1 1 0 0 0-1-1z">
                                                                        </path>
                                                                    </svg>
                                                                    <input type="text" class="form-control"
                                                                        id="<%= item.id %>" name="0_<%= item.id %>"
                                                                        value="<%= item.id %>" aria-required="true">
                                                                </span>
                                                                <span class="remove"><i
                                                                        class="fa-solid fa-xmark"></i></span>
                                                            </div>
                                                            <% if (item.children && item.children.length> 0) { %>
                                                                <ol class="dd-list" id="selectedMenuItems">
                                                                    <% item.children.forEach(child=> { %>
                                                                        <li class="dd-item" data-id="<%= child.id %>">
                                                                            <div class="dd-handle">
                                                                                <span>
                                                                                    <svg viewBox="0 0 20 20"
                                                                                        class="Online-Store-UI-IconWrapper__Icon_1aflm">
                                                                                        <path
                                                                                            d="M7.5 4.5a1 1 0 0 0-1 1V6a1 1 0 0 0 1 1H8a1 1 0 0 0 1-1v-.5a1 1 0 0 0-1-1zm0 4.25a1 1 0 0 0-1 1v.5a1 1 0 0 0 1 1H8a1 1 0 0 0 1-1v-.5a1 1 0 0 0-1-1zM6.5 14a1 1 0 0 1 1-1H8a1 1 0 0 1 1 1v.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1zM12 4.5a1 1 0 0 0-1 1V6a1 1 0 0 0 1 1h.5a1 1 0 0 0 1-1v-.5a1 1 0 0 0-1-1zm-1 5.25a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v.5a1 1 0 0 1-1 1H12a1 1 0 0 1-1-1zM12 13a1 1 0 0 0-1 1v.5a1 1 0 0 0 1 1h.5a1 1 0 0 0 1-1V14a1 1 0 0 0-1-1z">
                                                                                        </path>
                                                                                    </svg>
                                                                                    <input type="text"
                                                                                        class="form-control"
                                                                                        id="<%= child.id %>"
                                                                                        name="0_<%= child.id %>"
                                                                                        value="<%= child.id %>"
                                                                                        aria-required="true">
                                                                                </span>
                                                                                <span class="remove"><i
                                                                                        class="fa-solid fa-xmark"></i></span>
                                                                            </div>
                                                                        </li>
                                                                        <% }); %>
                                                                </ol>
                                                                <% } %>
                                                        </li>
                                                        <% }); %>
                                                </ol>
                                        </div>

                                        <pre><textarea name="Menu_json" id="jsonOutput" class="form-control" readonly
                                        hidden><%= navigation.Menu_Json %></textarea></pre>

                                    </div>
                                </div>
                            </div>

                            <div class="col-md-3 pe-0">
                                <div class="finalstatusmode">
                                    <div class="form-group">
                                        <h5>Visibility <sup>*</sup></h5>
                                        <select class="form-control" name="visibility" id="visibility" required
                                            aria-required="true">
                                            <option value="<%= navigation.Visibility %>">
                                                <%= navigation.Visibility %>
                                            </option>
                                            <% if (navigation.Visibility !=="Public" ) { %>
                                                <option value="Public">Publish</option>
                                                <% } %>
                                                    <% if (navigation.Visibility !=="Private" ) { %>
                                                        <option value="Private">Private</option>
                                                        <% } %>
                                                            <% if (navigation.Visibility !=="Draft" ) { %>
                                                                <option value="Draft">Draft</option>
                                                                <% } %>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <h6>Visibility Date</h6>
                                        <input type="datetime-local" class="form-control Visibilitydate"
                                            name="visibility_date" id="visibility_date">
                                    </div>
                                    <button class="fosavbtn" type="submit">Save</button>
                                </div>
                            </div>
                        </div>
                    </form>
                    <% } else { %>
                        <h6>No User Found </h6>
                        <% } %>

            </div>
        </div>



        <%- include("../partial/footer.ejs") %>